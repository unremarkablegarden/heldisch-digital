/*!
 * vue-scrollview v2.1.1
 * (c) 2017 Chris Hurlburt
 * Released under the MIT License.
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.VueScrollview=t.VueScrollview||{})}(this,function(t){"use strict";function n(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function e(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function r(t,n,o,c,u){var l=-1,a=t.length;for(o||(o=i),u||(u=[]);++l<a;){var f=t[l];n>0&&o(f)?n>1?r(f,n-1,o,c,u):e(u,f):c||(u[u.length]=f)}return u}function o(t,e){return e=P(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=P(r.length-e,0),c=Array(i);++o<i;)c[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=c,n(t,this,u)}}function i(t){return C(t)||c(t)||!!(F&&t&&t[F])}function c(t){return l(t)&&T.call(t,"callee")&&(!L.call(t,"callee")||A.call(t)==j)}function u(t){return null!=t&&f(t.length)&&!a(t)}function l(t){return d(t)&&u(t)}function a(t){var n=s(t)?A.call(t):"";return n==$||n==E}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=k}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function d(t){return!!t&&"object"==typeof t}function v(t,n,e){function r(n){var e=f,r=s;return f=s=void 0,g=n,v=t.apply(r,e)}function o(t){return g=t,w=setTimeout(u,n),y?r(t):v}function i(t){var e=t-g,r=n-(t-h);return m?Q(r,d-e):r}function c(t){var e=t-h,r=t-g;return void 0===h||e>=n||e<0||m&&r>=d}function u(){var t=U();if(c(t))return l(t);w=setTimeout(u,i(t))}function l(t){return w=void 0,k&&f?r(t):(f=s=void 0,v)}function a(){var t=U(),e=c(t);if(f=arguments,s=this,h=t,e){if(void 0===w)return o(h);if(m)return w=setTimeout(u,n),r(h)}return void 0===w&&(w=setTimeout(u,n)),v}var f,s,d,v,w,h,g=0,y=!1,m=!1,k=!0;if("function"!=typeof t)throw new TypeError(I);return n=b(n)||0,p(e)&&(y=!!e.leading,d=(m="maxWait"in e)?J(b(e.maxWait)||0,n):d,k="trailing"in e?!!e.trailing:k),a.cancel=function(){void 0!==w&&clearTimeout(w),g=0,f=h=s=w=void 0},a.flush=function(){return void 0===w?v:l(U())},a}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function w(t){return!!t&&"object"==typeof t}function h(t){return"symbol"==typeof t||w(t)&&B.call(t)==W}function b(t){if("number"==typeof t)return t;if(h(t))return N;if(p(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=p(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(q,"");var e=H.test(t);return e||R.test(t)?Y(t.slice(2),e?2:8):D.test(t)?N:+t}function g(n,e){void 0===e&&(e={});var r=e.throttle||50,o=e.callbacks||[],i=ut({throttle:r,callbacks:o});t.$scrollview=Object.assign({},{state:i},dt(i),vt(i)),n.component("ScrollView",pt)}var y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},m="Expected a function",k=9007199254740991,j="[object Arguments]",$="[object Function]",E="[object GeneratorFunction]",O="object"==typeof y&&y&&y.Object===Object&&y,x="object"==typeof self&&self&&self.Object===Object&&self,_=O||x||Function("return this")(),S=Object.prototype,T=S.hasOwnProperty,A=S.toString,V=_.Symbol,L=S.propertyIsEnumerable,F=V?V.isConcatSpreadable:void 0,P=Math.max,C=Array.isArray,M=function(t){return o(function(n){var e=(n=r(n,1)).length,o=e;for(t&&n.reverse();o--;)if("function"!=typeof n[o])throw new TypeError(m);return function(){for(var t=this,r=0,o=e?n[r].apply(this,arguments):arguments[0];++r<e;)o=n[r].call(t,o);return o}})}(!0),I="Expected a function",N=NaN,W="[object Symbol]",q=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,H=/^0b[01]+$/i,R=/^0o[0-7]+$/i,Y=parseInt,G="object"==typeof y&&y&&y.Object===Object&&y,K="object"==typeof self&&self&&self.Object===Object&&self,z=G||K||Function("return this")(),B=Object.prototype.toString,J=Math.max,Q=Math.min,U=function(){return z.Date.now()},X=function(t,n,e){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(I);return p(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),v(t,n,{leading:r,maxWait:n,trailing:o})},Z=function(t){var n=0;if(t.offsetParent)do{n+=t.offsetTop,t=t.offsetParent}while(t);return n>=0?n:0},tt=function(t,n){return!n.find(function(n){var e=n.$vnode.key;return!!t.locations.find(function(t){return t.component===e})})},nt=function(t,n){return n.find(function(n){return n.component===t})},et=function(t){var n=Z(t);return{top:n,bottom:n+t.clientHeight}},rt=function(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];return function(){window.requestAnimationFrame(function(){n.forEach(function(n){return n(t)})})}},ot=function(t){t.locations.forEach(function(n){var e=n.position,r=n.scrollview,o=n.component,i=t.scrollviews[r].offset,c=e.bottom-i-window.scrollY>0,u=e.top+i-window.scrollY<=window.innerHeight;t.tracking[r][o]=c&&u})},it=function(t){var n=t.scrollviews,e=t.tracking;Object.keys(n).forEach(function(t){return n[t].$emit("tracking:update",e[t])})},ct=function(t){var n=t.scrollviews;t.scrollviews={},t.tracking={},t.locations=[],Object.entries(n).forEach(function(t){return t[1].$emit("tracking:reset")}),t.scrollListener()},ut=function(t){void 0===t&&(t={});t.throttle;var n={callbacks:t.callbacks,scrollviews:{},locations:[],tracking:{},bottom:0};return M(ft,at)(n)},lt=function(t){var n=t._uid;return t.$children.reduce(function(t,e){var r=e.$el,o=e.$vnode.key,i=et(r);return t.locations.push({position:i,scrollview:n,component:o}),t.tracking[o]=!1,t},{locations:[],tracking:{}})},at=function(t){return t.scrollListener=X(rt.apply(void 0,[t,ot,it].concat(t.callbacks)),t.throttle,{leading:!0}),document.addEventListener("scroll",t.scrollListener,!1),t},ft=function(t){return t.recacheEl=document.createElement("span"),t.recacheEl.setAttribute("id","scrollview-recache"),document.body.appendChild(t.recacheEl),setInterval(function(){return st(t,function(){return ct(t)})},1e3),t},st=function(t,n){var e=Z(t.recacheEl);e!==t.bottom&&n(),t.bottom=e},dt=function(t){return{_track:function(n){if(tt(t,n.$children)){t.scrollviews[n._uid]=n;var e=lt(n),r=e.tracking,o=e.locations;return t.locations=t.locations.concat(o),t.tracking[n._uid]=r,ot(t),t.tracking[n._uid]}throw Error("[vue-scrollview]: Keys for components in a scrollview instance must be unique across all instances of scrollview.")},_untrack:function(n){var e=n._uid;delete t.tracking[e],t.locations=t.locations.filter(function(t){return t.scrollview!==e})}}},vt=function(t){return{scrollToComponent:function(n,e){var r=nt(n,t.locations),o=r.position,i=r.scrollview,c=t.scrollviews[i].offset,u=void 0!==e?e:c;window.scrollTo(0,o.top-u),t.scrollListener()},forceRefresh:function(){console.warn("[vue-scrollview]: $scrollview.forceRefresh() is deprecated and will be removed in the next major version. Please use $scrollview.refresh() instead."),ct(t)},refresh:function(){return ct(t)},getComponentLocation:function(n){return nt(n,t.locations).position}}},pt={render:function(t){return t(this.tag,[this.$scopedSlots.default(this.tracking)])},data:function(){return{tracking:{}}},mounted:function(){var n=this;this.tracking=t.$scrollview._track(this),this.$on("tracking:update",function(t){return n.tracking=t}),this.$on("tracking:reset",function(){return n.tracking=t.$scrollview._track(n)})},beforeDestroy:function(){t.$scrollview._untrack(this)},props:{offset:{type:Number,default:function(){return 200}},tag:{type:String,default:function(){return"span"}}}};"undefined"!=typeof window&&window.Vue&&(window.Vue.use(g),window.Vue.$scrollview=t.$scrollview);t.default=g,t.ScrollView=pt,t.version="2.1.1",Object.defineProperty(t,"__esModule",{value:!0})});