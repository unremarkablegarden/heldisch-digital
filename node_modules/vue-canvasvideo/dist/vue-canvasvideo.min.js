/*!
 * vue-canvasvideo v1.0.0
 * (c) 2017 Chris Hurlburt
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.VueCanvasvideo=t.VueCanvasvideo||{})}(this,function(t){"use strict";function e(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){return!!t&&"object"==typeof t}function n(t){return"symbol"==typeof t||i(t)&&b.call(t)==l}function s(t){if("number"==typeof t)return t;if(n(t))return u;if(e(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=e(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");var s=c.test(t);return s||f.test(t)?v(t.slice(2),s?2:8):d.test(t)?u:+t}function r(t,e){void 0===e&&(e={}),t.component("CanvasVideo",T)}var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a="Expected a function",u=NaN,l="[object Symbol]",h=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt,p="object"==typeof o&&o&&o.Object===Object&&o,m="object"==typeof self&&self&&self.Object===Object&&self,g=p||m||Function("return this")(),b=Object.prototype.toString,y=Math.max,_=Math.min,E=function(){return g.Date.now()},w=function(t,i,n){function r(e){var i=f,n=v;return f=v=void 0,w=e,m=t.apply(n,i)}function o(t){return w=t,g=setTimeout(h,i),L?r(t):m}function u(t){var e=t-w,n=i-(t-b);return x?_(n,p-e):n}function l(t){var e=t-b,n=t-w;return void 0===b||e>=i||e<0||x&&n>=p}function h(){var t=E();if(l(t))return d(t);g=setTimeout(h,u(t))}function d(t){return g=void 0,C&&f?r(t):(f=v=void 0,m)}function c(){var t=E(),e=l(t);if(f=arguments,v=this,b=t,e){if(void 0===g)return o(b);if(x)return g=setTimeout(h,i),r(b)}return void 0===g&&(g=setTimeout(h,i)),m}var f,v,p,m,g,b,w=0,L=!1,x=!1,C=!0;if("function"!=typeof t)throw new TypeError(a);return i=s(i)||0,e(n)&&(L=!!n.leading,p=(x="maxWait"in n)?y(s(n.maxWait)||0,i):p,C="trailing"in n?!!n.trailing:C),c.cancel=function(){void 0!==g&&clearTimeout(g),w=0,f=b=v=g=void 0},c.flush=function(){return void 0===g?m:d(E())},c},L=function(t){return t&&t.__esModule?t.default:t}(function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});e.delay=function(t,e){for(var i=arguments,n=arguments.length,s=Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=i[r];return setTimeout(function(){return t.apply(null,s)},e)},e.debounce=function(t,e){return e=e||100,function(){for(var i=arguments,n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=i[r];return t.debouncing||(t.lastReturnVal=t.apply(window,s),t.debouncing=!0),clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}};var n=e.isString=function(t){return t===""+t},s=(e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isNumberLike=function(t){return null!==t&&void 0!==t&&(n(t)&&isFinite(parseFloat(t))||isFinite(t))});e.getFirsNumberLike=function(){for(var t=arguments,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=t[n];if(!i.length)return null;for(var r=0,o=i.length;r<o;r++)if(s(i[r]))return i[r];return null},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.simpleExtend=function(t,e){var i={};for(var n in t)i[n]=t[n];for(var s in e)i[s]=e[s];return i}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.supportsRange=e.removeAllListenersFromEl=e.removeEventListeners=e.addEventListeners=e.insertAfter=e.triggerEvent=e.forEachAncestors=e.removeClass=e.addClass=e.hasClass=e.setCss=e.getDimension=e.getHiddenParentNodes=e.isHidden=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),s=e.isHidden=function(t){return 0===t.offsetWidth||0===t.offsetHeight||!1===t.open},r=e.getHiddenParentNodes=function(t){for(var e=[],i=t.parentNode;s(i);)e.push(i),i=i.parentNode;return e},o=(e.getDimension=function(t,e){function i(t){void 0!==t.open&&(t.open=!t.open)}var n=r(t),s=n.length,o=[],a=t[e];if(s){for(var u=0;u<s;u++)o[u]=n[u].style.display,n[u].style.display="block",n[u].style.height="0",n[u].style.overflow="hidden",n[u].style.visibility="hidden",i(n[u]);a=t[e];for(var l=0;l<s;l++)i(n[l]),n[l].style.display=o[l],n[l].style.height="",n[l].style.overflow="",n[l].style.visibility=""}return a},e.setCss=function(t,e){for(var i in e)t.style[i]=e[i];return t.style},e.hasClass=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")});e.addClass=function(t,e){o(t,e)||(t.className+=" "+e)},e.removeClass=function(t,e){var i=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(o(t,e)){for(;i.indexOf(" "+e+" ")>=0;)i=i.replace(" "+e+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}},e.forEachAncestors=function(t,e,i){for(i&&e(t);t.parentNode&&!e(t);)t=t.parentNode;return t},e.triggerEvent=function(t,e,i){if(!n.isString(e))throw new TypeError("event name must be String");if(!(t instanceof HTMLElement))throw new TypeError("element must be HTMLElement");e=e.trim();var s=document.createEvent("CustomEvent");s.initCustomEvent(e,!1,!1,i),t.dispatchEvent(s)},e.insertAfter=function(t,e){return t.parentNode.insertBefore(e,t.nextSibling)},e.addEventListeners=function(t,e,i){e.forEach(function(e){t.eventListenerList||(t.eventListenerList={}),t.eventListenerList[e]||(t.eventListenerList[e]=[]),t.addEventListener(e,i,!!window.PointerEvent&&{passive:!1}),t.eventListenerList[e].indexOf(i)<0&&t.eventListenerList[e].push(i)})},e.removeEventListeners=function(t,e,i){e.forEach(function(e){var n=void 0;t.removeEventListener(e,i,!1),t.eventListenerList&&t.eventListenerList[e]&&(n=t.eventListenerList[e].indexOf(i))>-1&&t.eventListenerList[e].splice(n,1)})},e.removeAllListenersFromEl=function(t,e){if(e.eventListenerList){for(var i in e.eventListenerList)e.eventListenerList[i].forEach(function(e){e===t._startEventListener&&this.el.removeEventListener(this.eventName,e,!1)},{eventName:i,el:e});e.eventListenerList={}}},e.supportsRange=function(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}},function(t,e){},function(t,e,i){function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(1)),a=n(i(0));i(2);var u=new RegExp("/[\\n\\t]/","g"),l=100,h="rangeSlider",d=0,c=o.supportsRange(),f={polyfill:!0,rangeClass:"rangeSlider",disabledClass:"rangeSlider--disabled",fillClass:"rangeSlider__fill",bufferClass:"rangeSlider__buffer",handleClass:"rangeSlider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"],min:null,max:null,step:null,value:null,buffer:null,stick:null,borderRadius:10,vertical:!1},v=function(){function t(e,i){s(this,t);var n=void 0,r=void 0,u=void 0,v=void 0;if(this.element=e,this.options=a.simpleExtend(f,i),this.polyfill=this.options.polyfill,this.vertical=this.options.vertical,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideStart=this.options.onSlideStart,this.onSlideEnd=this.options.onSlideEnd,this.onSlideEventsCount=-1,this.isInteractsNow=!1,this.needTriggerEvents=!1,this.polyfill||!c){this.options.buffer=this.options.buffer||parseFloat(this.element.getAttribute("data-buffer")),this.identifier="js-"+h+"-"+d++,this.min=a.getFirsNumberLike(this.options.min,parseFloat(this.element.getAttribute("min")),0),this.max=a.getFirsNumberLike(this.options.max,parseFloat(this.element.getAttribute("max")),n=l),this.value=a.getFirsNumberLike(this.options.value,this.element.value,parseFloat(this.element.value||this.min+(this.max-this.min)/2)),this.step=a.getFirsNumberLike(this.options.step,parseFloat(this.element.getAttribute("step"))||(r=1)),this.percent=null,a.isArray(this.options.stick)&&this.options.stick.length>=1?this.stick=this.options.stick:(u=this.element.getAttribute("stick"))&&(v=u.split(" ")).length>=1&&(this.stick=v.map(parseFloat)),this.stick&&1===this.stick.length&&this.stick.push(1.5*this.step),this._updatePercentFromValue(),this.toFixed=this._toFixed(this.step);var p=void 0;this.fill=document.createElement("div"),o.addClass(this.fill,this.options.fillClass),p=this.vertical?this.options.fillClass+"__vertical":this.options.fillClass+"__horizontal",o.addClass(this.fill,p),this.handle=document.createElement("div"),o.addClass(this.handle,this.options.handleClass),p=this.vertical?this.options.handleClass+"__vertical":this.options.handleClass+"__horizontal",o.addClass(this.handle,p),this.range=document.createElement("div"),o.addClass(this.range,this.options.rangeClass),this.range.id=this.identifier,this.range.appendChild(this.handle),this.range.appendChild(this.fill),p=this.vertical?this.options.rangeClass+"__vertical":this.options.rangeClass+"__horizontal",o.addClass(this.range,p),this.options.bufferClass&&(this.buffer=document.createElement("div"),o.addClass(this.buffer,this.options.bufferClass),this.range.appendChild(this.buffer),p=this.vertical?this.options.bufferClass+"__vertical":this.options.bufferClass+"__horizontal",o.addClass(this.buffer,p)),a.isNumberLike(this.options.value)&&(this._setValue(this.options.value,!0),this.element.value=this.options.value),a.isNumberLike(this.options.buffer)&&this.element.setAttribute("data-buffer",this.options.buffer),a.isNumberLike(this.options.min)&&this.element.setAttribute("min",""+this.min),(a.isNumberLike(this.options.max)||n)&&this.element.setAttribute("max",""+this.max),(a.isNumberLike(this.options.step)||r)&&this.element.setAttribute("step",""+this.step),o.insertAfter(this.element,this.range),o.setCss(this.element,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this._handleDown=this._handleDown.bind(this),this._handleMove=this._handleMove.bind(this),this._handleEnd=this._handleEnd.bind(this),this._startEventListener=this._startEventListener.bind(this),this._changeEventListener=this._changeEventListener.bind(this),this._handleResize=this._handleResize.bind(this),this._init(),window.addEventListener("resize",this._handleResize,!1),o.addEventListeners(document,this.options.startEvent,this._startEventListener),this.element.addEventListener("change",this._changeEventListener,!1)}}return r(t,[{key:"update",value:function(t,e){return e&&(this.needTriggerEvents=!0),a.isObject(t)&&(a.isNumberLike(t.min)&&(this.element.setAttribute("min",""+t.min),this.min=t.min),a.isNumberLike(t.max)&&(this.element.setAttribute("max",""+t.max),this.max=t.max),a.isNumberLike(t.step)&&(this.element.setAttribute("step",""+t.step),this.step=t.step,this.toFixed=this._toFixed(t.step)),a.isNumberLike(t.buffer)&&this._setBufferPosition(t.buffer),a.isNumberLike(t.value)&&this._setValue(t.value)),this._update(),this.onSlideEventsCount=0,this.needTriggerEvents=!1,this}},{key:"destroy",value:function(){o.removeAllListenersFromEl(this,document),window.removeEventListener("resize",this._handleResize,!1),this.element.removeEventListener("change",this._changeEventListener,!1),this.element.style.cssText="",delete this.element[h],this.range&&this.range.parentNode.removeChild(this.range)}},{key:"_toFixed",value:function(t){return(t+"").replace(".","").length-1}},{key:"_init",value:function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this._update()}},{key:"_updatePercentFromValue",value:function(){this.percent=(this.value-this.min)/(this.max-this.min)}},{key:"_startEventListener",value:function(t,e){var i=this,n=t.target,s=!1;o.forEachAncestors(n,function(t){return s=t.id===i.identifier&&!o.hasClass(t,i.options.disabledClass)},!0),s&&this._handleDown(t,e)}},{key:"_changeEventListener",value:function(t,e){if(!e||e.origin!==this.identifier){var i=t.target.value,n=this._getPositionFromValue(i);this._setPosition(n)}}},{key:"_update",value:function(){var t=this.vertical?"offsetHeight":"offsetWidth";this.handleSize=o.getDimension(this.handle,t),this.rangeSize=o.getDimension(this.range,t),this.maxHandleX=this.rangeSize-this.handleSize,this.grabX=this.handleSize/2,this.position=this._getPositionFromValue(this.value),this.element.disabled?o.addClass(this.range,this.options.disabledClass):o.removeClass(this.range,this.options.disabledClass),this._setPosition(this.position),this.options.bufferClass&&this.options.buffer&&this._setBufferPosition(this.options.buffer),this._updatePercentFromValue(),o.triggerEvent(this.element,"change",{origin:this.identifier})}},{key:"_handleResize",value:function(){var t=this;return a.debounce(function(){a.delay(function(){t._update()},300)},50)()}},{key:"_handleDown",value:function(t){if(this.isInteractsNow=!0,t.preventDefault(),o.addEventListeners(document,this.options.moveEvent,this._handleMove),o.addEventListeners(document,this.options.endEvent,this._handleEnd),!((" "+t.target.className+" ").replace(u," ").indexOf(this.options.handleClass)>-1)){var e=this.range.getBoundingClientRect(),i=this._getRelativePosition(t),n=this.vertical?e.bottom:e.left,s=this._getPositionFromNode(this.handle)-n,r=i-this.grabX;this._setPosition(r),i>=s&&i<s+this.handleWidth&&(this.grabX=i-s),this._updatePercentFromValue()}}},{key:"_handleMove",value:function(t){var e=this._getRelativePosition(t);this.isInteractsNow=!0,t.preventDefault(),this._setPosition(e-this.grabX)}},{key:"_handleEnd",value:function(t){t.preventDefault(),o.removeEventListeners(document,this.options.moveEvent,this._handleMove),o.removeEventListeners(document,this.options.endEvent,this._handleEnd),o.triggerEvent(this.element,"change",{origin:this.identifier}),(this.isInteractsNow||this.needTriggerEvents)&&this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.value,this.percent,this.position),this.onSlideEventsCount=0,this.isInteractsNow=!1}},{key:"_cap",value:function(t,e,i){return t<e?e:t>i?i:t}},{key:"_setPosition",value:function(t){var e=void 0,i=void 0,n=void 0,s=void 0,r=this._getValueFromPosition(this._cap(t,0,this.maxHandleX));this.stick&&((n=r%(s=this.stick[0]))<(i=this.stick[1]||.1)?r-=n:Math.abs(s-n)<i&&(r=r-n+s)),e=this._getPositionFromValue(r),this.vertical?(this.fill.style.height=e+this.grabX+"px",this.handle.style.transform="translateY(-"+e+"px)",this.handle.style["-ms-transform"]="translateY(-"+e+"px)"):(this.fill.style.width=e+this.grabX+"px",this.handle.style.transform="translateX("+e+"px)",this.handle.style["-ms-transform"]="translateX("+e+"px)"),this._setValue(r),this.position=e,this.value=r,this._updatePercentFromValue(),(this.isInteractsNow||this.needTriggerEvents)&&(this.onSlideStart&&"function"==typeof this.onSlideStart&&0===this.onSlideEventsCount&&this.onSlideStart(this.value,this.percent,this.position),this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(this.value,this.percent,this.position)),this.onSlideEventsCount++}},{key:"_setBufferPosition",value:function(t){var e=!0;if(isFinite(t))t=parseFloat(t);else{if(!a.isString(t))return void console.warn("New position must be XXpx or XX%");t.indexOf("px")>0&&(e=!1),t=parseFloat(t)}if(isNaN(t))console.warn("New position is NaN");else if(this.options.bufferClass){var i=e?t:t/this.rangeSize*100;i<0&&(i=0),i>100&&(i=100),this.options.buffer=i;var n=this.options.borderRadius/this.rangeSize*100,s=i-n;s<0&&(s=0),this.vertical?(this.buffer.style.height=s+"%",this.buffer.style.bottom=.5*n+"%"):(this.buffer.style.width=s+"%",this.buffer.style.left=.5*n+"%"),this.element.setAttribute("data-buffer",i)}else console.warn("You disabled buffer, it's className is empty")}},{key:"_getPositionFromNode",value:function(t){for(var e=this,i=this.vertical?this.maxHandleX:0;null!==t;)i+=e.vertical?t.offsetTop:t.offsetLeft,t=t.offsetParent;return i}},{key:"_getRelativePosition",value:function(t){var e=this.range.getBoundingClientRect(),i=this.vertical?e.bottom:e.left,n=0,s=this.vertical?"pageY":"pageX";return void 0!==t[s]?n=t.touches&&t.touches.length?t.touches[0][s]:t[s]:void 0!==t.originalEvent?void 0!==t.originalEvent[s]?n=t.originalEvent[s]:t.originalEvent.touches&&t.originalEvent.touches[0]&&void 0!==t.originalEvent.touches[0][s]&&(n=t.originalEvent.touches[0][s]):t.touches&&t.touches[0]&&void 0!==t.touches[0][s]?n=t.touches[0][s]:!t.currentPoint||void 0===t.currentPoint.x&&void 0===t.currentPoint.y||(n=this.vertical?t.currentPoint.y:t.currentPoint.x),this.vertical&&(n-=window.pageYOffset),this.vertical?i-n:n-i}},{key:"_getPositionFromValue",value:function(t){var e=(t-this.min)/(this.max-this.min)*this.maxHandleX;return isNaN(e)?0:e}},{key:"_getValueFromPosition",value:function(t){var e=t/(this.maxHandleX||1),i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(i.toFixed(this.toFixed))}},{key:"_setValue",value:function(t,e){(t!==this.value||e)&&(this.element.value=t,this.value=t,o.triggerEvent(this.element,"input",{origin:this.identifier}))}}],[{key:"create",value:function(e,i){var n=function(e){var n=e[h];n||(n=new t(e,i),e[h]=n)};e.length?Array.prototype.slice.call(e).forEach(function(t){n(t)}):n(e)}}]),t}();e.default=v,t.exports=e.default}])})})),x={render:function(t){return t("div",{attrs:{class:"vue-canvasvideo-controls"},on:{click:function(t){return t.stopPropagation()}}},[t("div",{attrs:{class:"vue-canvasvideo-controls__wrap"}},[!this.playing&&this.renderPlay(t),this.playing&&this.renderPause(t),t("div",{attrs:{class:"vue-canvasvideo-controls__scrubber"}},[t("input",{attrs:{class:"vue-canvasvideo-controls__timeline",type:"range"},ref:"timeline"})]),t("p",{attrs:{class:"vue-canvasvideo__elapsed"}},this.elapsedFormatted+" / "+this.durationFormatted)])])},watch:{elapsed:function(t){this.$refs.timeline.rangeSlider.update({min:0,max:this.durationRounded,step:.5,value:t,buffer:0})}},methods:{formatSeconds:function(t){return t>=3600?new Date(1e3*t).toISOString().substr(11,8):new Date(1e3*t).toISOString().substr(14,5)},renderPlay:function(t){var e=this;return t("svg",{attrs:{class:"vue-canvasvideo-control__button vue-canvasvideo-controls__button--play",viewBox:"0 0 320 389"},on:{click:function(t){return e.$emit("play",t)}}},[t("path",{attrs:{d:"M320 194.5L0 389V0"}})])},renderPause:function(t){var e=this;return t("svg",{attrs:{class:"vue-canvasvideo-control__button vue-canvasvideo-controls__button--pause",viewBox:"0 0 320 389"},on:{click:function(t){return e.$emit("pause",t)}}},[t("path",{attrs:{d:"M0 389h120V0H0v389zM200 0v389h120V0H200z"}})])}},mounted:function(){var t=this;L.create(this.$refs.timeline,{value:0,onSlide:function(e){return t.$emit("scrubbing",e)},onSlideEnd:function(e){return t.$emit("timechange",e)}})},computed:{durationRounded:function(){return Math.round(this.duration)},elapsedFormatted:function(){return this.formatSeconds(this.elapsed)},durationFormatted:function(){return this.formatSeconds(this.duration)}},props:{duration:{type:Number,required:!0},elapsed:{type:Number,required:!0},playing:{type:Boolean,required:!0}}},C={position:"relative",overflow:"hidden",width:"100%",height:"100%"},S={position:"absolute",top:0,left:0,width:"100%"},k={position:"absolute",top:0,left:0,width:"100%",height:"100%"},F={position:"absolute",top:0,left:0,width:"100%",height:"100%"},N={top:"50%",left:"50%",width:"auto",height:"auto",minWidth:"100%",minHeight:"100%",transform:"translate(-50%,-50%)"},P={display:"none"},T={render:function(t){var e=this;return t("div",{attrs:{class:"vue-canvasvideo__wrap"},style:C,on:{click:function(){return e.videoClicked()}},ref:"videoWrapper"},[t("div",{attrs:{class:"vue-canvasvideo__wrap--inner"},style:this.computedWrapStyles},[t("video",{attrs:{class:"vue-canvasvideo__video",src:this.src},style:this.computedVideoStyles,ref:"video"}),t("canvas",{attrs:{class:"vue-canvasvideo__canvas",width:this.width,height:this.height},style:this.computedCanvasStyles,ref:"videoCanvas"}),this.controls&&t(x,{on:{pause:function(t){return e.pause(t)},play:function(t){return e.play(t)},scrubbing:function(t){return e.scrub(t)},timechange:function(t){return e.jumpTime(t)}},props:{duration:this.duration,elapsed:this.elapsed,playing:this.playing}})])])},data:function(){return{playing:!1,scrubbing:!1,aspectRatio:1,duration:0,elapsed:0,lastTime:0,width:0,height:0}},methods:{init:function(){this.ctx=this.$refs.videoCanvas.getContext("2d"),this.$refs.video.load(),this.setCanvasSize(),this.autoplay&&this.play()},bind:function(){var t=this,e=this.$refs.video;e.addEventListener("timeupdate",function(){return t.drawFrame()}),e.addEventListener("canplay",function(){return t.drawFrame()}),e.addEventListener("loadedmetadata",function(){t.duration=e.duration,t.setCanvasSize()}),e.readyState>=2&&this.drawFrame(),window.addEventListener("resize",w(function(){t.setCanvasSize(),t.drawFrame()},1e3))},setCanvasSize:function(){var t=this.$refs.video;this.width=t.videoWidth,this.height=t.videoHeight,this.aspectRatio=this.height/this.width},play:function(t){t&&t.stopPropagation(),this.lastTime=Date.now(),this.playing=!0,this.renderVideo(),this.updateTime()},pause:function(t){t&&t.stopPropagation(),this.playing=!1},videoClicked:function(){this.playPauseOnClick&&this.togglePlay()},scrub:function(t){this.scrubbing||(this.stopUpdateTime(),this.scrubbing=!0),this.setTime(t)},togglePlay:function(){this.playing?this.pause():this.play()},jumpTime:function(t){this.scrubbing=!1,this.setTime(t),this.updateTime()},setTime:function(t){this.$refs.video.currentTime=t,this.elapsed=t},updateTime:function(){var t=this;this.timeInterval||(this.timeInterval=setInterval(function(){t.playing||t.stopUpdateTime(),t.elapsed=t.$refs.video.currentTime},500))},stopUpdateTime:function(){clearInterval(this.timeInterval),this.timeInterval=!1},renderVideo:function(){var t=this,e=this.$refs.video,i=Date.now(),n=(i-this.lastTime)/1e3,s=e.currentTime;n>=1/this.fps&&(e.currentTime=s+n,this.lastTime=i),e.currentTime>=e.duration&&(this.loop||(this.playing=!1),(this.resetOnLast||this.loop)&&(e.currentTime=0)),this.playing?this.animationFrame=window.requestAnimationFrame(function(){return t.renderVideo()}):window.cancelAnimationFrame(this.animationFrame)},drawFrame:function(){var t=this.$refs.video;this.ctx.drawImage(t,0,0,this.width,this.height)}},computed:{computedWrapStyles:function(){var t=Object.assign({},{paddingBottom:100*this.aspectRatio+"%"},S),e={marginTop:(1-this.aspectRatio)/2*100+"%"};return this.cover&&!this.square?Object.assign({},S,N):this.square&&!this.cover?Object.assign({},t,e):t},computedVideoStyles:function(){var t=Object.assign({},F,N);return this.showVideo?this.cover?t:F:P},computedCanvasStyles:function(){var t=Object.assign({},k,N);return this.showVideo?P:this.cover?t:k}},mounted:function(){this.cover&&this.square?console.error("[vue-canvasvideo]: The cover and square props cannot be used together."):(this.init(),this.bind())},props:{src:{type:String,required:!0},fps:{type:Number,default:function(){return 25}},showVideo:{type:Boolean,default:function(){return!1}},autoplay:{type:Boolean,default:function(){return!1}},square:{type:Boolean,default:function(){return!1}},loop:{type:Boolean,default:function(){return!1}},playPauseOnClick:{type:Boolean,default:function(){return!1}},resetOnLast:{type:Boolean,default:function(){return!1}},audio:{type:Boolean,default:function(){return!1}},cover:{type:Boolean,default:function(){return!1}},controls:{type:Boolean,default:function(){return!1}}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(r);t.default=r,t.CanvasVideo=T,t.version="1.0.0",Object.defineProperty(t,"__esModule",{value:!0})});